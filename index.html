<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>CryptoZombies front-end</title>
    <!--<script src="https://unpkg.com/@metamask/legacy-web3@latest/dist/metamask.web3.min.js"></script>-->
    <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="web3.min.js"></script>
    <script language="javascript" type="text/javascript" src="cbgameplay_abi.js"></script>
    <script language="javascript" type="text/javascript" src="constants.js"></script>

  </head>
  <body>

    <script>

      //import { CLIENT_EVENTS } from "@walletconnect/client";
      //import { PairingTypes, SessioTypes } from "@walletconnect/types";

      var cyrptoBladesGP;
      //var walletAdd = "0x50F0CaA444E5F033ec61A39BcB735eb957cbFa31";
      var Adress;

      function startApp() {
        //var cryptoBladesGPAddress = "0x39Bea96e13453Ed52A734B6ACEeD4c41F57B2271";
        //var cryptoBladesGPAddress = "0x34f7D2a38711F3aed475708AF4dd03B3deE6b02E";
        cyrptoBladesGP = new web3js.eth.Contract(cbgameplayABI, conAddress.oec.cryptoBlades);

      };


      /** OEC chars **/

      function connect(){
        ethereum.request({ method: 'eth_requestAccounts' })then(function(result){
          this.Adress = result;
        });
      }

      function fightOEClight() {
        //alert('fight');
        // const accounts = ethereum.request({ method: 'eth_accounts' })
        //   .then(function(result){
        //     return cyrptoBladesGP.methods.fight(oecChars.lightning.a, oecChars.lightning.weapon, $('#oecl1target')[0].value, oecChars.lightning.stamMult).send({ from: result[0] });
        //   });

        //var userAccount = web3.eth.accounts[0];

        //return cyrptoBladesGP.methods.fight(oecChars.lightning.a, oecChars.lightning.weapon, $('#oecl1target')[0].value, oecChars.lightning.stamMult).send({ from: ethereum.selectedAddress });
        const weiValue = Web3.utils.toWei('.1', 'gwei');

        if ($('#oecl1target1')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.lightning.a, oecChars.lightning.weapon, $('#oecl1target1')[0].value, oecChars.lightning.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target2')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.lightning.b, oecChars.lightning.weapon, $('#oecl1target2')[0].value, oecChars.lightning.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target3')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.lightning.c, oecChars.lightning.weapon, $('#oecl1target3')[0].value, oecChars.lightning.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target4')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.lightning.d, oecChars.lightning.weapon, $('#oecl1target4')[0].value, oecChars.lightning.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
     };

      function fightOECearth(){
        const weiValue = Web3.utils.toWei('.1', 'gwei');

        if ($('#oecl1target1')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.earth.a, oecChars.earth.weapon, $('#oecl1target1')[0].value, oecChars.earth.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target2')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.earth.b, oecChars.earth.weapon, $('#oecl1target2')[0].value, oecChars.earth.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target3')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.earth.c, oecChars.earth.weapon, $('#oecl1target3')[0].value, oecChars.earth.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target4')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.earth.d, oecChars.earth.weapon, $('#oecl1target4')[0].value, oecChars.earth.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
      }

      function fightOECfire() {
        const weiValue = Web3.utils.toWei('.1', 'gwei');

        if ($('#oecl1target1')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.fire.a, oecChars.fire.weapon, $('#oecl1target1')[0].value, oecChars.fire.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target2')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.fire.b, oecChars.fire.weapon, $('#oecl1target2')[0].value, oecChars.fire.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target3')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.fire.c, oecChars.fire.weapon, $('#oecl1target3')[0].value, oecChars.fire.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target4')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.fire.d, oecChars.fire.weapon, $('#oecl1target4')[0].value, oecChars.fire.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
      };      

      function fightOECwater() {
        const weiValue = Web3.utils.toWei('.1', 'gwei');

        if ($('#oecl1target1')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.water.a, oecChars.water.weapon, $('#oecl1target1')[0].value, oecChars.water.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target2')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.water.b, oecChars.water.weapon, $('#oecl1target2')[0].value, oecChars.water.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target3')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.water.c, oecChars.water.weapon, $('#oecl1target3')[0].value, oecChars.water.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target4')[0].value != '') cyrptoBladesGP.methods.fight(oecChars.water.d, oecChars.water.weapon, $('#oecl1target4')[0].value, oecChars.water.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
      };      

      /** BSC chars **/

      function fightBSClight() {
        const weiValue = Web3.utils.toWei('.1', 'gwei');

        if ($('#oecl1target1')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.lightning2.a, bscChars.lightning2.weapon, $('#oecl1target1')[0].value, bscChars.lightning2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target2')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.lightning2.b, bscChars.lightning2.weapon, $('#oecl1target2')[0].value, bscChars.lightning2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target3')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.lightning2.c, bscChars.lightning2.weapon, $('#oecl1target3')[0].value, bscChars.lightning2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target4')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.lightning2.d, bscChars.lightning2.weapon, $('#oecl1target4')[0].value, bscChars.lightning2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
      }; 

      function fightBSCearth() {
        const weiValue = Web3.utils.toWei('.1', 'gwei');

        if ($('#oecl1target1')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.earth2.a, bscChars.earth2.weapon, $('#oecl1target1')[0].value, bscChars.earth2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target2')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.earth2.b, bscChars.earth2.weapon, $('#oecl1target2')[0].value, bscChars.earth2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target3')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.earth2.c, bscChars.earth2.weapon, $('#oecl1target3')[0].value, bscChars.earth2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target4')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.earth2.d, bscChars.earth2.weapon, $('#oecl1target4')[0].value, bscChars.earth2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
      }; 

      function fightBSCfire() {
        const weiValue = Web3.utils.toWei('.1', 'gwei');

        if ($('#oecl1target1')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.fire2.a, bscChars.fire2.weapon, $('#oecl1target1')[0].value, bscChars.fire2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target2')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.fire2.b, bscChars.fire2.weapon, $('#oecl1target2')[0].value, bscChars.fire2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target3')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.fire2.c, bscChars.fire2.weapon, $('#oecl1target3')[0].value, bscChars.fire2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target4')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.fire2.d, bscChars.fire2.weapon, $('#oecl1target4')[0].value, bscChars.fire2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
      };    

      function fightBSCwater() {
        const weiValue = Web3.utils.toWei('.1', 'gwei');

        if ($('#oecl1target1')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.water2.a, bscChars.water2.weapon, $('#oecl1target1')[0].value, bscChars.water2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target2')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.water2.b, bscChars.water2.weapon, $('#oecl1target2')[0].value, bscChars.water2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target3')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.water2.c, bscChars.water2.weapon, $('#oecl1target3')[0].value, bscChars.water2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target4')[0].value != '') cyrptoBladesGP.methods.fight(bscChars.water2.d, bscChars.water2.weapon, $('#oecl1target4')[0].value, bscChars.water2.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
      };        

      /** HECO Chars **/

      function fightHECOlight() {
        const weiValue = Web3.utils.toWei('.1', 'gwei');

        if ($('#oecl1target1')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.lightning.a, hecoChars.lightning.weapon, $('#oecl1target1')[0].value, hecoChars.lightning.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target2')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.lightning.b, hecoChars.lightning.weapon, $('#oecl1target2')[0].value, hecoChars.lightning.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target3')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.lightning.c, hecoChars.lightning.weapon, $('#oecl1target3')[0].value, hecoChars.lightning.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target4')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.lightning.d, hecoChars.lightning.weapon, $('#oecl1target4')[0].value, hecoChars.lightning.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
     };

      function fightHECOearth(){
        const weiValue = Web3.utils.toWei('.1', 'gwei');

        if ($('#oecl1target1')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.earth.a, hecoChars.earth.weapon, $('#oecl1target1')[0].value, hecoChars.earth.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target2')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.earth.b, hecoChars.earth.weapon, $('#oecl1target2')[0].value, hecoChars.earth.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target3')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.earth.c, hecoChars.earth.weapon, $('#oecl1target3')[0].value, hecoChars.earth.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target4')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.earth.d, hecoChars.earth.weapon, $('#oecl1target4')[0].value, hecoChars.earth.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
      }

      function fightHECOfire() {
        const weiValue = Web3.utils.toWei('.1', 'gwei');

        if ($('#oecl1target1')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.fire.a, hecoChars.fire.weapon, $('#oecl1target1')[0].value, hecoChars.fire.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target2')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.fire.b, hecoChars.fire.weapon, $('#oecl1target2')[0].value, hecoChars.fire.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target3')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.fire.c, hecoChars.fire.weapon, $('#oecl1target3')[0].value, hecoChars.fire.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target4')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.fire.d, hecoChars.fire.weapon, $('#oecl1target4')[0].value, hecoChars.fire.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
      };      

      function fightHECOwater() {
        const weiValue = Web3.utils.toWei('.1', 'gwei');

        if ($('#oecl1target1')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.water.a, hecoChars.water.weapon, $('#oecl1target1')[0].value, hecoChars.water.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target2')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.water.b, hecoChars.water.weapon, $('#oecl1target2')[0].value, hecoChars.water.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target3')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.water.c, hecoChars.water.weapon, $('#oecl1target3')[0].value, hecoChars.water.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
        if ($('#oecl1target4')[0].value != '') cyrptoBladesGP.methods.fight(hecoChars.water.d, hecoChars.water.weapon, $('#oecl1target4')[0].value, hecoChars.water.stamMult).send(
          { from: ethereum.selectedAddress, gasPrice: weiValue });
      };    

      // Call the function and do something with the result:

      window.addEventListener('load', function() {

        // Checking if Web3 has been injected by the browser (Mist/MetaMask)
        if (typeof web3 !== 'undefined') {
          // Use Mist/MetaMask's provider
          
          web3js = new Web3(web3.currentProvider);

        } else {
          // Handle the case where the user doesn't have Metamask installed
          // Probably show them a message prompting them to install Metamask
        }

        // Now you can start your app & access web3 freely:
        startApp();

      });
    </script>

  <div id="test">
    <button type="button" onclick="connect()">Connect</button>
    <input type="text" id="oecl1target1">
    <input type="text" id="oecl1target2">
    <input type="text" id="oecl1target3">
    <input type="text" id="oecl1target4">
  </div>
  <div>
    <button type="button" onclick="fightHECOlight()">HECO-L</button>
    <button type="button" onclick="fightHECOearth()">HECO-E</button>
    <button type="button" onclick="fightHECOfire()">HECO-F</button>
    <button type="button" onclick="fightHECOwater()">HECO-W</button>
  </div>
  <div>
    <button type="button" onclick="fightOEClight()">OEC-L</button>
    <button type="button" onclick="fightOECearth()">OEC-E</button>
    <button type="button" onclick="fightOECfire()">OEC-F</button>
    <button type="button" onclick="fightOECwater()">OEC-W</button>
  </div>
  <div>
    <button type="button" onclick="fightBSClight()">BSC-L2</button>
    <button type="button" onclick="fightBSCearth()">BSC-E2</button>
    <button type="button" onclick="fightBSCfire()">BSC-F2</button>
    <button type="button" onclick="fightBSCwater()">BSC-W2</button>
  </div>  
  </body>
</html>